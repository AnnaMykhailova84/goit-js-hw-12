{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '54418567-38d23a8e17a003c539283c0a3';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 15;\n\nexport async function getImagesByQuery(query, page) {\n  const response = await axios\n    .get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: PER_PAGE,\n      },\n    });\n    return response.data;\n\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\n\nconst loadMoreBtn = document.querySelector('.load-more');\nconst loader = document.querySelector('.loader');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function createGallery(images) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n          <ul class=\"gallery-img-info\">\n            <li>Likes<span class=\"js-info\">${likes}</span></li>\n            <li>Views<span class=\"js-info\">${views}</span></li>\n            <li>Comments<span class=\"js-info\">${comments}</span></li>\n            <li>Downloads<span class=\"js-info\">${downloads}</span></li>\n          </ul>\n        </a>\n      </li>\n    `\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nexport function showLoader() {\n  loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  loader.classList.add('hidden');\n}\n\nexport function showLoadMoreBtn() {\n  loadMoreBtn.classList.remove('hidden');\n}\n\nexport function hideLoadMoreBtn() {\n  loadMoreBtn.classList.add('hidden');\n}\n\nexport function scrollPage() { \n  const cardEl = gallery.querySelector('li');\n  let cardHeight = cardEl.getBoundingClientRect().height * 2;\n  window.scrollBy({ \n  top: cardHeight,\n  behavior: \"smooth\",\n  });\n}","// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImagesByQuery } from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreBtn,\n  hideLoadMoreBtn,\n  scrollPage,\n} from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\nconst PER_PAGE = 15;\n\nform.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onSearch(event) {\n  event.preventDefault();\n\n  query = event.currentTarget.elements['search-text'].value.trim();\n\n  if (!query) return;\n\n  page = 1;\n  totalHits = 0;\n  clearGallery();\n  hideLoadMoreBtn();\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(query, page);\n    totalHits = data.totalHits;\n\n    if (data.hits.length === 0) {\n      showError();\n      return;\n    }\n\n    createGallery(data.hits);\n    checkTotalHits();\n  } catch (error) {\n    console.error(error);\n    showError();\n  } finally {\n    hideLoader();\n    form.reset();\n  }\n  \n}\n\nasync function onLoadMore() {\n  page += 1;\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(query, page);\n    createGallery(data.hits);\n    checkTotalHits();\n    scrollPage();\n  } catch (error) {\n    console.error(error);\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction checkTotalHits() {\n  const loadedImages = page * PER_PAGE;\n\n  if (loadedImages >= totalHits) {\n    hideLoadMoreBtn();\n    showEndMessage();\n  } else {\n    showLoadMoreBtn();\n  }\n}\n\nfunction showError() {\n  clearGallery();\n  hideLoadMoreBtn();\n  iziToast.error({\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    position: 'topRight',\n    close: false,\n    progressBar: false,\n    timeout: '3000',\n    messageSize: '16',\n  });\n}\n\nfunction showEndMessage() {\n  iziToast.error({\n    message:\n      'We\\'re sorry, but you\\'ve reached the end of search results.',\n    position: 'topRight',\n    close: false,\n    progressBar: false,\n    timeout: '2000',\n    messageSize: '16',\n  });\n}\n\n\n"],"names":["API_KEY","BASE_URL","PER_PAGE","getImagesByQuery","query","page","axios","gallery","loadMoreBtn","loader","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreBtn","hideLoadMoreBtn","scrollPage","cardHeight","form","totalHits","onSearch","onLoadMore","event","data","showError","checkTotalHits","error","showEndMessage","iziToast"],"mappings":"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"}